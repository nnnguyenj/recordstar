{% extends "base.html" %}
{% load bootstrap5 %}

{% block title %}
  {{ cd.title }} - Details
{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="row">
    <div class="col-md-6">
      {% if cd.cover_image %}
        <img src="{{ cd.cover_image.url }}" class="img-fluid" alt="Cover image">
      {% else %}
        <div class="bg-light text-center p-5">No Cover Image</div>
      {% endif %}
    </div>
    <div class="col-md-6">
      <h2>{{ cd.title }}</h2>
      <h4>{{ cd.artist }}</h4>
      <p><strong>Genre:</strong> {{ cd.genre }}</p>
      <p><strong>Release Year:</strong> {{ cd.release_year }}</p>
      <p><strong>Description:</strong> {{ cd.description }}</p>

      {% if is_librarian or is_owned %}
        <div class="btn-group mt-3">
          {% if is_owned %}
            <a href="{% url 'edit_cd' cd.id %}" class="btn btn-warning">Edit</a>
            <form method="post" action="{% url 'delete_cd' cd.id %}" onsubmit="return confirm('Are you sure you want to delete this CD?');">
              {% csrf_token %}
              <button type="submit" class="btn btn-danger">Delete</button>
            </form>
          {% endif %}
          {% if user.is_authenticated %}
            <a href="{% url 'add_cd_to_collection' cd.id %}" class="btn btn-success">Add to Collection</a>
          {% endif %}
        </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
