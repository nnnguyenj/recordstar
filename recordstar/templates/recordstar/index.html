{% load static %}
{% load socialaccount %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RecordStar</title>
    <link rel="stylesheet" href="{% static 'index.css' %}">
</head>
<body>
    <div class="container">
        <h1 class="title"> RecordStar </h1>
    </div>
    {% if user.is_authenticated %}
        <div class="account_info">
            {% comment %}
            Check the user's profile to determine their account type.
            {% endcomment %}
            {% if user.profile.account_type == 'L' %}
                <div class="media">
                    <img
                        class="rounded-circle account-img"
                        src="{{ user.profile.image.url }}"
                    />
                </div>
                <form method="post" enctype="multipart/form-data" action="{% url 'update_profile_picture' %}">
                    {% csrf_token %}
                    <input type="file" name="profile_picture" accept="image/*">
                    <button type="submit">Upload</button>
                </form>
                <h2>Welcome Librarian, {{ user.username }}</h2>
                <p>You have librarian privileges. You can add new items and collections.</p>
                <a href="{% url 'add_item' %}">Add New Item</a>
            {% else %}
                <div class="media">
                    <img
                        class="rounded-circle account-img"
                        src="{{ user.profile.image.url }}"
                    />
                </div>
                <form method="post" enctype="multipart/form-data" action="{% url 'update_profile_picture' %}">
                    {% csrf_token %}
                    <input type="file" name="profile_picture" accept="image/*">
                    <button type="submit">Upload</button>
                </form>
                <h2>Welcome Patron, {{ user.username }}</h2>
                <p>You can browse and request to borrow items.</p>
            {% endif %}
            <a href="{% url 'account_logout' %}" class="logout_button"> Logout </a>
        </div>
    {% else %}
        <div class="account_info">
            <a href="{% provider_login_url 'google' %}?next=/recordstar/" class="login_button">
                Login with Google
             </a>
        </div>
    {% endif %}
</body>
</html>